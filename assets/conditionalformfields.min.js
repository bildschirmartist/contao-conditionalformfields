!function(t){"use strict";function i(i,n){this.element=i,this.settings=t.extend({},s,n),this._defaults=s,this._name=e,this.init()}var e="conditionalFormFields",s={fields:[],conditions:{}};t.extend(i.prototype,{init:function(){var i=this;i.initFields(),i.initFieldsets(),t(this.element).on("ajax_change",function(){i.initFields(),i.initFieldsets()})},initFields:function(){var i=this;i.fields={},t(i.settings.fields).each(function(e,s){t(i.element).find('*[name^="'+s+'"]').each(function(){var e=t(this),s=e.attr("name");"[]"==s.substr(s.length-2)?(s=s.substr(0,s.length-2),i.fields[s]instanceof Array||(i.fields[s]=[]),i.fields[s].push(e)):i.fields[s]=e,t(this).on("change",function(){i.toggleFieldsets()})})})},initFieldsets:function(){var i=this;i.fieldsets={},i.fieldsetFields={};for(var e in i.settings.conditions)i.fieldsets[e]=t(".cffs-"+e),i.fieldsetFields[e]=i.fieldsets[e].find("input, select, textarea");i.toggleFieldsets()},toggleFieldsets:function(){var t=this,i=t.getFieldValues();for(var e in t.settings.conditions){var s="var in_array = function(needle, haystack) { return jQuery.isArray(haystack) ? (jQuery.inArray(needle, haystack) != -1) : false; }; "+t.settings.conditions[e],n=new Function("values",s);n(i)?t.showFieldset(e):t.hideFieldset(e)}},showFieldset:function(i){this.fieldsets[i].show(),t(this.fieldsetFields[i]).each(function(){t(this).attr("disabled",!1)})},hideFieldset:function(i){this.fieldsets[i].hide(),t(this.fieldsetFields[i]).each(function(){t(this).attr("disabled",!0)})},getFieldValues:function(){var i=this,e={},s=null;return t.each(i.fields,function(n){"radio"==t(this).attr("type")?t(this).each(function(){s=i.getFieldValue(this),s&&(e[n]=s)}):t.isArray(this)?(e[n]=[],t(this).each(function(){s=i.getFieldValue(this),s&&e[n].push(s)})):(s=i.getFieldValue(this),s&&(e[n]=s))}),e},getFieldValue:function(i){return i=t(i),"checkbox"==i.attr("type")||"radio"==i.attr("type")?i.is(":checked")?i.val():null:i.val()}}),t.fn[e]=function(s){return this.each(function(){t.data(this,"plugin_"+e)||t.data(this,"plugin_"+e,new i(this,s))})}}(jQuery,window,document);