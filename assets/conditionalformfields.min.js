!function(i,e,t,s){"use strict";function n(e,t){this.element=e,this.settings=i.extend({},d,t),this._defaults=d,this._name=l,this.init()}var l="conditionalFormFields",d={fields:[],conditions:{}};i.extend(n.prototype,{init:function(){var e=this;e.initFields(),e.initFieldsets(),i(this.element).on("ajax_change",function(){e.initFields(),e.initFieldsets()})},initFields:function(){var e=this;e.fields={},i(e.settings.fields).each(function(t,s){i(e.element).find('*[name^="'+s+'"]').each(function(){var t=i(this),s=t.attr("name");"[]"==s.substr(s.length-2)?(s=s.substr(0,s.length-2),e.fields[s]instanceof Array||(e.fields[s]=[]),e.fields[s].push(t)):e.fields[s]=t,i(this).on("change",function(){e.toggleFieldsets()})})})},initFieldsets:function(){var e=this;e.fieldsets={},e.fieldsetFields={};for(var t in e.settings.conditions)e.fieldsets[t]=i(".cffs-"+t),e.fieldsetFields[t]=e.fieldsets[t].find("input, select, textarea");e.toggleFieldsets()},toggleFieldsets:function(){var i=this,e=i.getFieldValues();for(var t in i.settings.conditions){var s="var in_array = function(needle, haystack) { return jQuery.isArray(haystack) ? (jQuery.inArray(needle, haystack) != -1) : false; }; "+i.settings.conditions[t],n=new Function("values",s);n(e)?i.showFieldset(t):i.hideFieldset(t)}},showFieldset:function(e){this.fieldsets[e].show(),i(this.fieldsetFields[e]).each(function(){i(this).attr("disabled",!1)})},hideFieldset:function(e){this.fieldsets[e].hide(),i(this.fieldsetFields[e]).each(function(){i(this).attr("disabled",!0)})},getFieldValues:function(){var e=this,t={},s=null;return i.each(e.fields,function(n){i.isArray(this)?(t[n]=[],i(this).each(function(){s=e.getFieldValue(this),s&&t[n].push(s)})):(s=e.getFieldValue(this),s&&(t[n]=s))}),t},getFieldValue:function(e){return e=i(e),"checkbox"==e.attr("type")||"radio"==e.attr("type")?e.is(":checked")?e.val():null:e.val()}}),i.fn[l]=function(e){return this.each(function(){i.data(this,"plugin_"+l)||i.data(this,"plugin_"+l,new n(this,e))})}}(jQuery,window,document);