!function(t,e,i,s){"use strict";function n(e,i){this.element=e,this.settings=t.extend({},d,i),this._defaults=d,this._name=l,this.init()}var l="conditionalFormFields",d={fields:[],conditions:{}};t.extend(n.prototype,{init:function(){var e=this;e.initFields(),e.initFieldsets(),t(this.element).on("ajax_change",function(){e.initFields(),e.initFieldsets()})},initFields:function(){var e=this;e.fields={},t(e.settings.fields).each(function(i,s){t(e.element).find('*[name^="'+s+'"]').each(function(){var i=t(this),s=i.attr("name");"[]"==s.substr(s.length-2)?(s=s.substr(0,s.length-2),e.fields[s]instanceof Array||(e.fields[s]=[]),e.fields[s].push(i)):e.fields[s]=i,t(this).on("change",function(){e.toggleFieldsets()})})})},initFieldsets:function(){var e=this;e.fieldsets={},e.fieldsetFields={};for(var i in e.settings.conditions)e.fieldsets[i]=t(".cffs-"+i),e.fieldsetFields[i]=e.fieldsets[i].find("input, select, textarea");e.toggleFieldsets()},toggleFieldsets:function(){var t=this,e=t.getFieldValues();for(var i in t.settings.conditions){var s="var in_array = function(needle, haystack) { return jQuery.isArray(haystack) ? (jQuery.inArray(needle, haystack) != -1) : false; }; "+t.settings.conditions[i],n=new Function("values",s);n(e)?t.showFieldset(i):t.hideFieldset(i)}},showFieldset:function(e){this.fieldsets[e].show(),t(this.fieldsetFields[e]).each(function(){t(this).attr("disabled",!1)})},hideFieldset:function(e){this.fieldsets[e].hide(),t(this.fieldsetFields[e]).each(function(){t(this).attr("disabled",!0)})},getFieldValues:function(){var e=this,i={},s=null;return t.each(e.fields,function(n){t.isArray(this)&&"radio"!=el.attr("type")?(i[n]=[],t(this).each(function(){s=e.getFieldValue(this),s&&i[n].push(s)})):(s=e.getFieldValue(this),s&&(i[n]=s))}),i},getFieldValue:function(e){return e=t(e),"checkbox"==e.attr("type")||"radio"==e.attr("type")?e.is(":checked")?e.val():null:e.val()}}),t.fn[l]=function(e){return this.each(function(){t.data(this,"plugin_"+l)||t.data(this,"plugin_"+l,new n(this,e))})}}(jQuery,window,document);