(function(d,b,a,g){var c="conditionalFormFields";var e={fields:[],conditions:{}};function f(i,h){this.element=i;this.settings=d.extend({},e,h);this._defaults=e;this._name=c;this.init()}d.extend(f.prototype,{init:function(){var h=this;h.initFields();h.initFieldsets();d(this.element).on("ajax_change",function(){h.initFields();h.initFieldsets()})},initFields:function(){var h=this;h.fields={};d(h.settings.fields).each(function(j,k){d(h.element).find('*[name^="'+k+'"]').each(function(){var l=d(this);var i=l.attr("name");if(i.substr(i.length-2)=="[]"){i=i.substr(0,i.length-2);if(!(h.fields[i] instanceof Array)){h.fields[i]=[]}h.fields[i].push(l)}else{if(l.attr("type")==="radio"){if(!(h.fields[i] instanceof Array)){h.fields[i]=[]}h.fields[i].push(l)}else{h.fields[i]=l}}d(this).on("change",function(){h.toggleFieldsets()})})})},initFieldsets:function(){var h=this;h.fieldsets={};h.fieldsetFields={};for(var i in h.settings.conditions){h.fieldsets[i]=d(".cffs-"+i);h.fieldsetFields[i]=h.fieldsets[i].find("input, select, textarea")}h.toggleFieldsets()},toggleFieldsets:function(){var j=this;var h=j.getFieldValues();for(var l in j.settings.conditions){var k="var in_array = function(needle, haystack) { return jQuery.isArray(haystack) ? (jQuery.inArray(needle, haystack) != -1) : false; }; "+j.settings.conditions[l];var i=new Function("values",k);if(!i(h)){j.hideFieldset(l)}else{j.showFieldset(l)}}},showFieldset:function(h){this.fieldsets[h].show();d(this.fieldsetFields[h]).each(function(){d(this).attr("disabled",false)})},hideFieldset:function(h){this.fieldsets[h].hide();d(this.fieldsetFields[h]).each(function(){d(this).attr("disabled",true)})},getFieldValues:function(){var j=this;var h={};var i=null;d.each(j.fields,function(k){if(d.isArray(this)){d(this).each(function(){if(d(this).attr("type")==="radio"){i=j.getFieldValue(this);if(i){h[k]=i;return false}}else{h[k]=[];i=j.getFieldValue(this);if(i){h[k].push(i)}}})}else{i=j.getFieldValue(this);if(i){h[k]=i}}});return h},getFieldValue:function(h){h=d(h);if(h.attr("type")=="checkbox"||h.attr("type")=="radio"){return h.is(":checked")?h.val():null}return h.val()}});d.fn[c]=function(h){return this.each(function(){if(!d.data(this,"plugin_"+c)){d.data(this,"plugin_"+c,new f(this,h))}})}})(jQuery,window,document);