;(function(d,b,a,g){var c="conditionalFormFields";var e={fields:[],conditions:{}};function f(i,h){this.element=i;this.settings=d.extend({},e,h);this._defaults=e;this._name=c;this.init()}d.extend(f.prototype,{init:function(){var h=this;h.initFields();h.initFieldsets();d(this.element).on("ajax_change",function(){h.initFields();h.initFieldsets()})},initFields:function(){var h=this;h.fields={};h.settings.fields.each(function(i){d(h.element).find('*[name^="'+i+'"]').each(function(){var k=d(this);var j=k.attr("name");if(j.substr(j.length-2)=="[]"||k.attr("type")=="radio"){if(j.substr(j.length-2)=="[]"){j=j.substr(0,j.length-2)}if(!(h.fields[j] instanceof Array)){h.fields[j]=[]}h.fields[j].push(k)}else{h.fields[j]=k}d(this).on("change",function(){h.toggleFieldsets()})})})},initFieldsets:function(){var h=this;h.fieldsets={};h.fieldsetFields={};for(var i in h.settings.conditions){h.fieldsets[i]=d(".cffs-"+i);h.fieldsetFields[i]=h.fieldsets[i].find("input, select, textarea")}h.toggleFieldsets()},toggleFieldsets:function(){var j=this;var h=j.getFieldValues();for(var l in j.settings.conditions){var k="var in_array = function(needle, haystack) { return jQuery.isArray(haystack) ? (jQuery.inArray(needle, haystack) != -1) : false; }; "+j.settings.conditions[l];var i=new Function("values",k);if(!i(h)){j.hideFieldset(l)}else{j.showFieldset(l)}}},showFieldset:function(h){this.fieldsets[h].show();this.fieldsetFields[h].each(function(){d(this).attr("disabled",false)})},hideFieldset:function(h){this.fieldsets[h].hide();this.fieldsetFields[h].each(function(){d(this).attr("disabled",true)})},getFieldValues:function(){var j=this;var h={};var i=null;d.each(j.fields,function(k){if(d.isArray(this)){h[k]=[];d(this).each(function(){i=j.getFieldValue(this);if(i){h[k].push(i)}})}else{i=j.getFieldValue(this);if(i){h[k]=i}}});return h},getFieldValue:function(h){h=d(h);if(h.attr("type")=="checkbox"||h.attr("type")=="radio"){return h.is(":checked")?h.val():null}return h.val()}});d.fn[c]=function(h){return this.each(function(){if(!d.data(this,"plugin_"+c)){d.data(this,"plugin_"+c,new f(this,h))}})}})(jQuery,window,document);